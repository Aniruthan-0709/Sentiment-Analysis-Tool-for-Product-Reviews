# Use an official Python runtime as the base image
FROM python:3.9-slim

# Install OS-level dependencies (if needed)
RUN apt-get update && apt-get install -y --no-install-recommends \
    git \
 && rm -rf /var/lib/apt/lists/*

# Install Python dependencies (kagglehub and google-cloud-storage)
RUN pip install kagglehub[pandas-datasets] google-cloud-storage

# Set environment variable for Kaggle credentials location
ENV KAGGLE_CONFIG_DIR=/root/.kaggle

# Create directory for Kaggle credentials
RUN mkdir -p /root/.kaggle

# Copy your application code from the code/ folder into the container
COPY code/load_data.py /app/load_data.py

# Set the working directory to /app
WORKDIR /app

# Run your load_data.py script when the container starts
CMD ["python", "load_data.py"]
